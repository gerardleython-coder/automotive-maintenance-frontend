<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti칩n de Flota Vehicular</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="header-title">游뚱 Sistema de Gesti칩n de Flota Vehicular</h1>
            <button class="btn btn-primary" id="btnNewVehicle">
                <span class="btn-icon">+</span>
                Registrar Veh칤culo
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Stats -->
            <section class="stats-section">
                <div class="stat-card">
                    <h3 class="stat-value" id="totalVehicles">0</h3>
                    <p class="stat-label">Veh칤culos Registrados</p>
                </div>
                <div class="stat-card">
                    <h3 class="stat-value stat-warning" id="totalAlerts">0</h3>
                    <p class="stat-label">Alertas Activas</p>
                </div>
            </section>

            <!-- Vehicles Grid -->
            <section class="vehicles-section">
                <h2 class="section-title">Veh칤culos</h2>
                <div class="vehicles-grid" id="vehiclesGrid">
                    <!-- Vehicle cards will be inserted here -->
                </div>
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">游늶</div>
                    <h3>No hay veh칤culos registrados</h3>
                    <p>Comienza registrando tu primer veh칤culo</p>
                    <button class="btn btn-primary" onclick="openModal('createModal')">Registrar Veh칤culo</button>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal: Crear Veh칤culo -->
    <div class="modal" id="createModal">
        <div class="modal-overlay" onclick="closeModal('createModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Registrar Nuevo Veh칤culo</h2>
                <button class="modal-close" onclick="closeModal('createModal')">&times;</button>
            </div>
            <form id="createForm" class="modal-body">
                <div class="form-group">
                    <label for="createId" class="form-label">ID del Veh칤culo</label>
                    <input type="text" id="createId" class="form-input" placeholder="V-001" required pattern="V-\d{3}">
                    <small class="form-hint">Formato: V-XXX (ejemplo: V-001)</small>
                </div>
                <div class="form-group">
                    <label for="createPlate" class="form-label">Placa</label>
                    <input type="text" id="createPlate" class="form-input" placeholder="ABC-123" required pattern="[A-Z]{3}-\d{3,4}">
                    <small class="form-hint">Formato: XXX-123 o XXX-1234</small>
                </div>
                <div class="form-group">
                    <label for="createModel" class="form-label">Modelo</label>
                    <input type="text" id="createModel" class="form-input" placeholder="Toyota Corolla 2020" required>
                </div>
                <div class="form-group">
                    <label for="createMileage" class="form-label">Kilometraje Inicial</label>
                    <input type="number" id="createMileage" class="form-input" placeholder="0" required min="0" max="1000000">
                    <small class="form-hint">Rango: 0 - 1,000,000 km</small>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('createModal')">Cancelar</button>
                <button type="submit" form="createForm" class="btn btn-primary">Registrar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Ver Detalles -->
    <div class="modal" id="detailsModal">
        <div class="modal-overlay" onclick="closeModal('detailsModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalles del Veh칤culo</h2>
                <button class="modal-close" onclick="closeModal('detailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="details-grid">
                    <div class="detail-item">
                        <span class="detail-label">ID:</span>
                        <span class="detail-value" id="detailId">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Placa:</span>
                        <span class="detail-value" id="detailPlate">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Modelo:</span>
                        <span class="detail-value" id="detailModel">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Kilometraje:</span>
                        <span class="detail-value" id="detailMileage">-</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('detailsModal')">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Actualizar Kilometraje -->
    <div class="modal" id="updateModal">
        <div class="modal-overlay" onclick="closeModal('updateModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Actualizar Kilometraje</h2>
                <button class="modal-close" onclick="closeModal('updateModal')">&times;</button>
            </div>
            <form id="updateForm" class="modal-body">
                <input type="hidden" id="updateVehicleId">
                <div class="info-box">
                    <p><strong>Veh칤culo:</strong> <span id="updateVehicleInfo">-</span></p>
                    <p><strong>Kilometraje actual:</strong> <span id="updateCurrentMileage">-</span> km</p>
                </div>
                <div class="form-group">
                    <label for="updateNewMileage" class="form-label">Nuevo Kilometraje</label>
                    <input type="number" id="updateNewMileage" class="form-input" placeholder="0" required min="0" max="1000000">
                    <small class="form-hint" id="updateHint">Debe ser mayor al kilometraje actual</small>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('updateModal')">Cancelar</button>
                <button type="submit" form="updateForm" class="btn btn-primary">Actualizar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Ver Alertas -->
    <div class="modal" id="alertsModal">
        <div class="modal-overlay" onclick="closeModal('alertsModal')"></div>
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h2 class="modal-title">Alertas de Mantenimiento</h2>
                <button class="modal-close" onclick="closeModal('alertsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-box">
                    <p><strong>Veh칤culo:</strong> <span id="alertsVehicleInfo">-</span></p>
                </div>
                <div id="alertsList">
                    <!-- Alerts will be inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('alertsModal')">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Confirmar Eliminaci칩n -->
    <div class="modal" id="deleteModal">
        <div class="modal-overlay" onclick="closeModal('deleteModal')"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 class="modal-title">Confirmar Eliminaci칩n</h2>
                <button class="modal-close" onclick="closeModal('deleteModal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="deleteVehicleId">
                <div class="warning-box">
                    <div class="warning-icon">丘멆잺</div>
                    <p>쮼st치 seguro que desea eliminar este veh칤culo?</p>
                    <p><strong id="deleteVehicleInfo">-</strong></p>
                    <p class="text-small">Esta acci칩n eliminar치 el veh칤culo y todas sus alertas asociadas. No se puede deshacer.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('deleteModal')">Cancelar</button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
